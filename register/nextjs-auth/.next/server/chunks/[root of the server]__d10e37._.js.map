{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/erand/OneDrive%20-%20University%20of%20Jaffna/myGit%20proj/NextJs-Projects/register/nextjs-auth/src/lib/db.js"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool({\r\n  host: 'localhost',\r\n  user: 'root',\r\n  password: '',\r\n  database: 'tast12',\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n});\r\n\r\nexport default pool;"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,OAAO,mIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/erand/OneDrive%20-%20University%20of%20Jaffna/myGit%20proj/NextJs-Projects/register/nextjs-auth/src/app/api/login/route.js"],"sourcesContent":["import pool from '@/lib/db';\r\nimport bcrypt from 'bcryptjs';\r\nimport { cookies } from 'next/headers';\r\n\r\nexport async function POST(request) {\r\n  const { email, password } = await request.json();\r\n\r\n  try {\r\n    const [rows] = await pool.query('SELECT * FROM users WHERE email = ?', [email]);\r\n    if (rows.length === 0) {\r\n      return Response.json({ message: 'Invalid credentials' }, { status: 400 });\r\n    }\r\n\r\n    const user = rows[0];\r\n    const isPasswordValid = await bcrypt.compare(password, user.password);\r\n    if (!isPasswordValid) {\r\n      return Response.json({ message: 'Invalid credentials' }, { status: 400 });\r\n    }\r\n\r\n    cookies().set('user', JSON.stringify({ id: user.id, email: user.email }), { maxAge: 60 * 60 * 24 });\r\n    return Response.json({ message: 'Login successful' }, { status: 200 });\r\n  } catch (error) {\r\n    console.error(error);\r\n    return Response.json({ message: 'Error logging in' }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAChC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;IAE9C,IAAI;QACF,MAAM,CAAC,KAAK,GAAG,MAAM,kHAAA,CAAA,UAAI,CAAC,KAAK,CAAC,uCAAuC;YAAC;SAAM;QAC9E,IAAI,KAAK,MAAM,KAAK,GAAG;YACrB,OAAO,SAAS,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,MAAM,OAAO,IAAI,CAAC,EAAE;QACpB,MAAM,kBAAkB,MAAM,mIAAA,CAAA,UAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;QACpE,IAAI,CAAC,iBAAiB;YACpB,OAAO,SAAS,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD,IAAI,GAAG,CAAC,QAAQ,KAAK,SAAS,CAAC;YAAE,IAAI,KAAK,EAAE;YAAE,OAAO,KAAK,KAAK;QAAC,IAAI;YAAE,QAAQ,KAAK,KAAK;QAAG;QACjG,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACtE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACtE;AACF"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}